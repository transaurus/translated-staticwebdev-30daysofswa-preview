---
slug: practices-e2e
title: "#22: E2E Development & SWA"
authors: [natalia]
tags: [swa, 30days, best-practices]
draft: false
---

<head>
  <meta name="twitter:url" content="https://www.azurestaticwebapps.dev/blog/practices-e2e" />
  <meta name="twitter:title" content="#22: E2E Development & SWA" />
  <meta name="twitter:description" content="Join @anfibiacreativa as we kick off 'Best Practices' week on #30DaysOfSWA with a discussion on End-to-End Developer Experiences for @AzureStatic Apps!" />
  <meta name="twitter:image" content="https://www.azurestaticwebapps.dev/assets/images/22-banner-c5cc6f06159eb61034c900af02756c3a.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@nitya" />
  <meta name="twitter:site" content="@AzureStaticApps" /> 
  <link rel="canonical" href="https://www.azurestaticwebapps.dev/blog/practices-e2e" />
</head>

欢迎来到 **#30DaysOfSWA** 的`第4周第1天`!!

这将开启我们的**"最佳实践"**主题周，我们将探索更多有助于为用户提供增强或更优化的现代Web应用体验的主题。首先我们将关注端到端的_开发者体验(DX)_——拥有流畅无缝的DX对用户体验(UX)的补充意义，以及通过更有效的应用架构设计和服务集成来提升开发者体验的最佳实践。让我们开始吧！

:::info[内容概览]
 * 什么是端到端开发者体验(DX)？
 * 构建和部署静态Web应用时的核心DX组件有哪些？
 * 如何通过实施最佳实践来改进DX？
 * 如何创建架构矩阵来指导端到端开发者体验？
 * **练习**：尝试复现下文所示的架构！
:::

![](../static/img/series/22-banner.png)

今天我们将探讨卓越开发体验的重要性，以及如何在使用Azure静态Web应用构建和部署静态Web应用时提升您的开发体验！

我承认撰写这篇文章花费了不少时间。相比描述开发者体验对我的意义，写一个包含代码示例和技术定义的具体主题要容易得多。

开发者体验的定义如同任何其他_体验_一样具有主观性。它包含大量个人因素，随着您和所处环境的变化而变化。诸如_从业年限_、_开发的软件类型_或_部署环境_等因素都会影响您对体验的感知。

那么如何用语言表述？如何定义和界定它？

我无法以让所有人产生共鸣的方式做到这一点。我只能从个体开发者的角度，基于我的需求和对结果的感知来解释它，以及它如何影响我的视野和工作。

## 可预测性

首先我想说，在我的个人生活中，当回忆难忘经历时，许多都源于一时冲动。一个自发行为。生活中我并不是个计划性强的人。我属于那种会在周六早晨突然宣布"这周末我们要去远方！"的类型。而我丈夫（与我截然相反，极度需要条理）总会问：

* 好吧，你想去哪儿？
 * 订好酒店了吗？
 * 知道午餐在哪里解决吗？

而我的标准回答总是："无所谓！直接上车出发，路上再决定！"因为我认为冒险精神与体验探索密不可分，而_旅途本身_就是乐趣的一部分。

> **但在工作中，我追求可预测性。**

我喜欢结构化、可重复性、模式与规范。我珍视能与团队达成共识的框架和方案。因为这些特质往往能带来快速成果和成功。

## 道路隐喻

体验如同道路，可能引您抵达目的地——也可能不会。对我而言，**开发体验恰似我们行驶的道路**：

* 设有里程碑——可衡量进度
 * 多车道设计——赋予灵活性
 * 配备匝道——快速切换路径
 * 明确目的地——确保方向清晰

当我初次接触网页开发时，技术路径的类型还较为单一。多数是线性且缓慢的，尤其是前端开发领域。你需要与服务器进行多次往返交互，才能让页面渲染出内容。

![枯燥开发的往返路径](../static/img/series/w4d1/swaF1.png)

相比之下，如今我们正疾驰在多车道的高速公路上，这里有无数迂回曲折的路线、相互连接的道路和可供选择的配置方案。要抵达目的地，你可能需要通过匝道连接两条不同的道路——就像我们通过API对接两个不同的服务那样。

![更多车道、更强连通性、更多乐趣、更高速度](../static/img/series/w4d1/swaF3.png)

延续这个比喻，**糟糕的开发体验就如同拙劣的道路规划或施工**：

- 道路老旧、颠簸、龟裂
- 路标稀少且间距过大，无法让用户及时处理并遵循指引
- 错过出口后可能需长途跋涉才能调头
- 道路间可能完全缺乏互通匝道
- 车辆故障或燃料耗尽时，附近可能没有补给服务站
- 即便发现服务站，也无法预先了解补给成本
- 数十公里内可能没有任何餐饮供给

这些出行限制如何映射到糟糕的开发体验已不言而喻，但我们仍要明确阐述：

- 因基础设施条件被迫降速
- 陷入毫无进展的困境
- 因环境缺陷和资源匮乏导致应用质量持续恶化，形成技术债务
- 缺乏实施安全防护的能力
- 找不到最新、完整的文档来规划最佳路径
- 缺少合适的SDK、API方法或集成方案来完成基础/复杂任务（如认证、存储、无头CMS内容创作或CI/CD管道配置）
- 缺乏构建、部署、优化、预览、监控或加速流程的工具链
- 无法扩展或难以预估扩展成本
- 全程毫无乐趣可言

**因为我们必须承认：开发本应是充满乐趣的旅程。这需要合适的工具、完善的基础设施以及清晰的规划。** 当这些全部缺失时，就如同驾驶兰博基尼穿越沙漠。

:::info[核心结论]
开发者体验涵盖个体在使用工具或技术完成软件开发任务时的全部物理、情感和认知体验。它可能等同于痛苦（糟糕时）、忍耐（沮丧或平淡时）或愉悦与欣喜（卓越时）。
:::

![支撑正确架构所需的基础设施、能力与资源](../static/img/series/w4d1/swaF4.png)

做出正确的架构与技术决策将直接影响最终成果。而唯有提出正确的问题，我们才能做出这些关键决策。

## 架构规划：我们需要哪些核心基础设施、能力与资源？

正如我们希望通过这个[30天静态Web应用系列](https://dev.to/azure/kicking-off-30daysofswa-2d8g)让您了解到的，这是一项专为开发SPA和静态生成网站的前端开发者打造的服务。我们持续扩展其功能，支持更多框架和用例。

### 文档：保持新鲜与相关！

在规划卓越端到端开发者体验的里程碑时，我们全力确保您始终能获取完整且最新的文档——既帮助您入门时了解静态Web应用的所有可能性，也随着应用增长持续提供相关文档支持。

### 工作流：构建模块与无缝集成！

我们不仅在Azure门户打造直观界面，更刻意确保与前端开发者熟悉喜爱的工具（如GitHub和VS Code）实现无缝集成。通过[这些工具](https://dev.to/azure/15-develop-with-azure-tools-3h47)，体验将更加流畅。

创建静态Web应用资源时，系统会自动推送GitHub Actions工作流文件。您既可通过门户UI引导创建，也能直接安装[官方扩展](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps)，在不离开代码编辑器的情况下完成部署！

若偏爱命令行，全新静态Web应用CLI支持Azure登录、应用创建/构建/部署，还提供本地模拟器供您在云端部署前测试应用。

创建静态Web应用和配置流水线，从未如此简单！

### 高效多能：无服务+容器化API

随着Jamstack和JavaScript全栈应用场景日益复杂，我们通过标准化API集成机制（包括行业合规模式的无服务函数和高效开发工具包）来优化端到端开发体验。

这特别解决了前端开发者长期面临的挑战——数据库集成。静态Web应用与CosmosDB深度整合，这款多功能云数据库通过不同API满足多样化需求，以极高效率应对各类场景。

### 安全与性能：端到端测试+调试

就像进服务站检查机油和胎压，现在您可以使用同生态链的顶尖工具——比如[Playwright](https://dev.to/azure/16-test-automation-with-playwright-odk)和Edge开发者工具——进行测试（没错，我在玩文字游戏！）。

通过新发布的预览环境测试特定暂存分支时，您还能在每次迭代中集成行业领先工具，直至功能完备。

## 路线对齐：终极端到端方案应映射开发周期

每个独立环节都可视为端到端体验。例如：

* 实现身份验证防御未授权访问——这是端到端体验
* 集成数据库实现数据持久化——这是端到端体验
* 通过事件驱动函数按需集成第三方服务——这也是端到端体验

但真正的终极端到端体验，是涵盖架构定义矩阵所有组件、映射完整软件开发周期的解决方案。

![开发路线图等于开发周期](../static/img/series/w4d1/SWAF5.png)

当进入应用程序的系统设计阶段时，我们将开始思考研究中称为"待完成工作"的事项，并通过工具或与其他产品服务的集成来具体实现这些需求。

**初始化阶段**。
待完成工作通常是通用性的——"我需要构建一个静态Web应用"。

- 我需要什么？ => 需要一个框架。
- 框架要求什么 => 这是一个运行在浏览器或Node.js环境中的JS框架。需要Node运行环境和包管理工具来管理依赖。
- 所选框架自带CLI => 需要用它来优化和构建应用。
- 希望进行版本控制 => 需要版本控制工具。为了协作，需要将代码托管在中央远程仓库（即版本控制托管平台）。
- 由于每次集成时都需要远程构建 => 需要包含运行器和虚拟化/模拟的CI/CD流水线。
- 还需要发布应用 => 因此需要托管服务。
- 以及..."

这些就是我们需要映射到"设置与服务能力"的_需求_，从而搭建能够满足这些需求的本地和远程环境。

## 欢迎来到矩阵世界

让我们基于开发者的"待完成工作"共同进行架构定义练习，并按照前文图表定义的里程碑进行分类。作为附加项，我们会将其映射到可能是业务需求、开发者待完成工作或最终用户故事的需求项。

该矩阵将大致基于下方的高阶架构图：

![静态Web应用高阶架构图](../static/img/series/w4d1/swaF6.png)

| Job to be done | Product/Service | Phase | Requirement | 
|----------|-------------|------|------|
|As a developer, I want to use the tools I am familiar with, to code, build and deploy my Jamstack (Statically Generated) applications| VS Code / SWA CLI | Setup | As an end-user, I want to be able to access an online catalogue of products with their respective detail pages |
|As a developer, I want to connect my remote repository where I collaborate with other team members, to the service I will be deploying my app to | GitHub / VS Code / Static Web Apps* | Setup | As a business owner, I want the code and secrets for my e-commerce platform to be stored safely |
|As a developer, I want to setup a CI/CD pipeline, for remote collaboration and fast/agile integration |  GitHub Actions Static Web Apps | Setup | As a content author, I want to see the new content published when I submit it to the content authoring tool, without any additional manual work |
|As a developer, I want to integrate with a database to store content and assets | CosmosDB*† / Azure Functions*† / Static Web Apps* | Implementation or Integration | As a business owner I want all assets and information to stored safely and versioned |
|As a developer, I want to integrate with a (headless) CMS for 3rd party content authoring | Azure Functions*† / Static Web Apps* |Implementation or Integration | As a content author, I want to see the new content published when I submit it to the content authoring tool |
|As a developer, I want to trigger the CI/CD workflows via custom/scheduled events | GitHub Actions* / Durable Functions** | Integration | As a business owner, I want my teams to automate the process of building and deploying new code or content so we can achieve optimal time-to-value |
|As a developer, I want to secure my implementation to make sure requests to our service come from my application | Indentity Platform† | Implementation or Integration | As a business owner, I want to make sure our e-commerce tool is secure and compliant with laws and regulations |
|As a developer, I want to restrict access to certain pages to users with a certain role| Identity Platform† | Implementation or Integration | As an end user, I want to keep a private profile with my payment methods and other PII |
|As a developer, I want to localize the UI to several different languages | Cognitive Services*† | Implementation or Integration | As an end user, I want to access content in my own language |
|As a developer, I want to personalize recommendations in dynamic pages | Cognitive Services*† | Implementation or Integration | As an end user, I want to have recommendations that are relevant to me |
|As a developer, I want to integrate with a 3rd party payment platform | _3rd party_ / Azure Functions* | Implementation or Integration | As a business owner, I want payments processed by a reliable 3rd party provider |
|As a developer, I want to preview and debug changes before I promote them to production | Static Web Apps Preview/Edge Developer Tools | Build/Deploy/Testing | As a business owner, I want to preview changes before they go live |
|As a developer, I want to reduce technical debt by implementing an e2e test automation suite | Playwright / GitHub Actions | Testing | As an end user, I want the user interface to respond quickly and accurately, when I interact with it |
|As a developer, I want to be able to publish my application to the web | Static Web Apps | Build/Deploy | As a business owner, I want my application to be accessible by web users from all parts of the world, with the least possible latency |
|As a developer, I want to enable a mechanism for the application to be accessible via a distributed network | Azure Front Door | Setup/Integration | As a user I want web pages I visit, to load very fast |
|As a developer I want to integrate with analytics tools, to share data with stakeholders | Static Web Apps / App Insights | Setup/Testing | As a business owner, I want to know what products are being queried the most to understand market trends |

(*)表示可通过VS Code扩展直接操作，或通过CLI在本地实现的能力
(†) 表示存在用于加速和保障实现的安全开发工具包(SDK)

> **由此可见，您无需身处大型组织或分布式团队，就能实施特定工作流，为开发流程赋予结构，从而提升开发效率并获得愉悦体验。**

在项目启动时记录专属矩阵，并随着应用规模扩展和需求增长不断完善，可帮助您更高效地组织工作、确保最佳实践的实施，甚至评估技术选型以优化发展路径。

静态Web应用作为Jamstack开发的现代化低配置方案，免费提供丰富的周边集成生态，其优势在于能伴随您的需求增长而扩展——无论是容量提升、工具补充还是完整迁移。

## 总结...

开发者体验是从设计到执行、测试直至发布的端到端实践，可关联单个功能或功能组的开发、实现和/或集成全过程。

为了让开发者获得贯穿始终的_卓越_体验，他们需要：

- 指导原则：帮助明确可设计方案的问题定义
- 兼容技术：作为解决方案的构建模块
- 完整文档：实时提供准确新鲜的指导支持
- 效率工具：简化个体或团队的"待完成工作"
- 底层机制：根据需求显隐的编译、转译、测试、部署和执行支撑（如运行时和流水线）
- 集成规范：与其他技术的对接或迁移方案

当这些要素（以及更多）得到满足时，开发者将提升生产力、保持专注，将时间投入创造性工作而非重复性劳动。

## 实践练习

尝试重现上述架构吧！大部分集成功能在免费层即可使用！向我们展示你的实现成果！