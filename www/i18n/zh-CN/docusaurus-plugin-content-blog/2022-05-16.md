---
slug: devtools-azure
title: "#15: Develop with Azure Tools"
authors: [nitya]
tags: [swa, 30days, dev-tools]
draft: false
---

欢迎来到 **#30DaysOfSWA** 的 `第3周第1天`!!

我们刚刚跨越了#30DaysOfSWA的中途里程碑！第一周我们涵盖了核心概念，第二周探索了使用示例。今天我们将以**_开发者工具_**为主题开启第三周！让我们开始吧！

## 本周内容

* 开发者体验是怎样的？
 * 探索：Azure CLI
 * 探索：Azure 门户
 * 探索：Azure Functions Core Tools
 * **练习：** 查阅 Azure 门户和 CLI 中关于 SWA 的文档。

![](../static/img/series/15-banner.png)

## 开发者体验

当我们思考如何构建现代 Web 应用时，我们也在考虑自身的_开发者体验_。根据[某个定义](https://microsoft.github.io/code-with-engineering-playbook/developer-experience/#defining-end-to-end)，开发者体验指的是我们作为开发者执行必要任务以实现预期结果的难易程度。

在应用开发场景中，这些任务通常包括：

* **构建**项目（在创建代码库之后）
 * **测试**项目行为（以验证是否符合需求）
 * **部署**项目（到暂存或生产环境）
 * **调试**项目（修复问题、审计性能等）

拥有合适的**开发者工具**可以决定工作流是高效顺畅还是痛苦不堪。本周我们将了解各种工具和服务，它们能让 Azure Static Web Apps 的开发者体验更加流畅。

* **Azure 开发工具 |** 使用 Azure 的核心工具有哪些？
 * **Playwright |** 如何为应用实施端到端测试？
 * **CI/CD |** 如何自动化构建/部署工作流？
 * **Edge DevTools |** 如何在浏览器中调试和分析应用？
 * **SWA CLI |** 如何简化静态 Web 应用的本地开发？
 * **Visual Studio Code |** 如何强化我们的 IDE 驱动体验？

在今天的文章中，我们将了解使现代 Web 应用开发者能轻松在 Azure 上构建静态 Web 应用的主要工具：

* [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/) - 用于创建和管理 Azure 资源的命令行接口
 * [Azure 门户](https://docs.microsoft.com/en-us/azure/azure-portal/) - 基于 Web 的统一控制台，是 Azure CLI 的替代方案
 * [Azure SWA CLI](https://github.com/Azure/static-web-apps-cli) - Azure Static Web Apps 的_本地开发工具_
 * [Azure Functions Core Tools](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local) - Azure Functions 的_本地开发工具_
 * [Visual Studio Code 的 Azure 扩展](https://code.visualstudio.com/docs/azure/extensions) - 从 IDE 无缝访问 Azure

我们将在本周晚些时候更详细地介绍 Azure SWA CLI 和 VS Code 扩展。

## 刚接触 Azure？

我们假设您熟悉云计算概念，如资源、资源组、订阅和服务。如果不熟悉也没关系。现在正是了解 **[Azure 基础知识](https://docs.microsoft.com/en-us/learn/paths/az-900-describe-cloud-concepts/)** 的好时机——这是一个由6部分组成的学习系列，将带您了解 Azure 上的核心概念、服务、解决方案、安全功能、身份与治理方面以及成本管理功能。

如果您是刚接触 Azure 的 JavaScript 或 Node.js 开发者，请收藏以下链接：

* [Azure SDK](https://azure.github.io/azure-sdk/releases/latest/js.html) - 适用于您首选编程语言的服务集成工具包
 * [面向JavaScript开发者的Azure指南](https://docs.microsoft.com/en-us/azure/developer/javascript/) - 包含教程与示例代码
 * [Azure上的JS开发工具链](https://docs.microsoft.com/en-us/azure/developer/javascript/node-azure-tools)及[本地环境配置技巧](https://docs.microsoft.com/en-us/azure/developer/javascript/core/configure-local-development-environment?tabs=bash)

## Azure CLI

了解Azure核心概念后，我们来探讨如何_创建和管理_云资源。[Azure CLI](https://docs.microsoft.com/en-us/cli/azure/what-is-azure-cli)是一款_跨平台_命令行工具，可通过终端以交互方式(或脚本)安全连接Azure并执行资源操作。

最快捷的上手方式是通过浏览器[在Azure Cloud Shell中安装运行](https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli#install-or-run-in-azure-cloud-shell)，无需本地安装。随后按[此指南](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli)在开发环境本地安装。可通过测试核心`az`命令验证安装。

```bash
az --version
```

Azure CLI默认支持管理绝大多数Azure服务，[此处查看支持的服务列表](https://docs.microsoft.com/en-us/cli/azure/azure-services-the-azure-cli-can-manage)及对应快速入门文档。Web开发者可重点关注[Web相关服务子集](https://docs.microsoft.com/en-us/cli/azure/azure-services-the-azure-cli-can-manage#web)，涵盖从应用服务、API管理到Azure静态Web应用的全套服务。

执行以下命令获取当前上下文的交互式帮助：

```
az staticwebapp --help
```

通过CLI可管理应用设置、创建/删除静态应用、管理应用环境与关联函数、监管身份信息/用户/应用密钥等。

* 查阅[az staticwebapp命令参考](https://docs.microsoft.com/en-us/cli/azure/staticwebapp?view=azure-cli-latest)学习相关命令选项
 * 使用Azure CLI[构建首个静态Web应用](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-cli?tabs=vanilla-javascript)

## Azure门户

若倾向使用基于Web的统一控制台管理Azure资源，[Azure门户](https://docs.microsoft.com/en-us/azure/azure-portal/)提供了_图形化界面的CLI替代方案_。该门户设计为_持续可用_。下图展示门户界面布局，可通过以下文档深入了解功能：

* 通过[Azure门户组件解析](https://docs.microsoft.com/en-us/azure/azure-portal/azure-portal-overview#getting-around-the-portal)了解架构
 * 在[门户导航教程](https://docs.microsoft.com/en-us/learn/modules/tour-azure-portal/3-navigate-the-portal)中学习操作技巧
 * 或跟随[Azure快速入门中心](https://docs.microsoft.com/en-us/azure/azure-portal/azure-portal-quickstart-center)引导式教程

实践环节：通过Azure门户[构建首个静态Web应用](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-portal?tabs=vanilla-javascript)，体验从创建到部署的完整开发流程。

![](https://docs.microsoft.com/en-us/learn/modules/tour-azure-portal/media/3-portal.png)

## Functions Core Tools

Azure Static Web Apps 采用 [Azure Functions](https://docs.microsoft.com/en-us/azure/azure-functions/) 为应用提供无服务器 API 支持。您可以通过我们早前的文章[《为SWA启用API》](./2022-05-04.md)深入了解，文中探讨了两种为静态Web应用添加无服务器API支持的方式：_托管函数_（由Azure Static Web Apps创建并管理）和_自带函数_（独立创建并管理）。

[Azure Functions Core Tools](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=v4%2Cmacos%2Ccsharp%2Cportal%2Cbash#install-the-azure-functions-core-tools)（简称`func`）是一款支持**本地开发**的命令行工具，可用于创建、测试甚至将函数部署至Azure。安装完成后，可通过以下命令获取该工具支持的命令和选项的交互式帮助：

```
func --help
```

您将看到类似如下的输出（部分内容已精简），由此了解该CLI的主要操作功能：

```
Azure Functions Core Tools
Core Tools Version:       4.0.3971 ...
Function Runtime Version: 4.0.1.16815

Usage: func [context] [context] <action> [-/--options]

Contexts:
azure       Commands to log in to Azure and manage resources
durable     Commands for working with Durable Functions
extensions  Commands for installing extensions
function    Commands for creating and running functions locally
host        Commands for running the Functions host locally
kubernetes  Commands for working with Kubernetes and Azure Functions
settings    Commands for managing environment settings for the local Functions host
templates   Commands for listing available function templates

Actions: 
start   Launches the functions runtime host  
    --port [-p]     Local port to listen on. 
                    Default: 7071
..
..
```

通过文档学习如何实现以下操作：

* [安装Azure Functions Core Tools](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local)
 * [创建本地Functions项目](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=v4%2Cmacos%2Ccsharp%2Cportal%2Cbash#create-a-local-functions-project)
 * [本地运行和测试Functions](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=v4%2Cmacos%2Ccsharp%2Cportal%2Cbash#start)
 * [将Functions发布至Azure](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=v4%2Cmacos%2Ccsharp%2Cportal%2Cbash#publish)

本周晚些时候，我们将深入探讨 **[Azure Static Web Apps CLI](https://github.com/Azure/static-web-apps-cli)** —— 这是一款用于Azure Static Web Apps本地开发的命令行工具，可与Azure Functions Core Tools无缝协作，为创建和测试支持API的静态Web应用项目提供统一的开发体验。

**Azure CLI**（用于通过命令行管理Azure资源）、**Azure Functions Core Tools**（用于管理Azure Functions本地开发与部署）和**Azure Static Web Apps CLI**（用于管理SWA本地开发与部署）的组合，为Azure上的Web开发者提供了无缝衔接的命令行开发体验。

## Azure扩展

如果您更倾向于基于IDE的开发方式呢？Visual Studio Code已为您做好准备。本周晚些时候的博文中，我们将深入探讨可用于在IDE内实现从编码到云端全流程开发体验的关键Visual Studio Code扩展。现在，我先为您提供以下资源：

* 阅读[Azure扩展](https://code.visualstudio.com/docs/azure/extensions)文档，了解如何在VS Code中查找和安装相关扩展
 * 浏览[将应用程序部署至Azure](https://code.visualstudio.com/docs/azure/deployment)页面获取VS Code实战教程——包括[Azure Static Web Apps](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript)和[Azure Functions](https://docs.microsoft.com/azure/javascript/tutorial-vscode-serverless-node-01)专项教程
 * 在[VS Code应用市场](https://marketplace.visualstudio.com/search?term=Microsoft&target=VSCode&category=Azure&sortBy=Relevance)搜索来自Microsoft及广大开发者社区的相关扩展

下图展示了当前**Microsoft**发布在**Azure**分类下按**趋势**排序的扩展列表。您可以看到[Azure Static Web Apps扩展](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps)位列其中——我们将在本周最后一篇博文中详细解析！

![](../static/img/series/15-extensions.png)

## 实践练习

哇，今天我们涵盖了大量内容！但不必担心需要记住所有细节。今天的目的是让大家了解该在_何时_使用_哪种_工具，以及_为什么_要使用它。您今天的练习任务是：

* 选择 **Azure 门户** 或 **Azure CLI** 中关于 Azure Static Web Apps 的文档，熟悉其中提供的众多命令、设置和选项。

 * 尝试使用所选工具的默认快速入门教程，然后通过已部署的静态 Web 应用探索其他命令，切实感受其工作方式。

## 资源

* [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/) 文档 - 包含 [Static Web Apps 快速入门](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-cli?tabs=vanilla-javascript)
 * [Azure 门户](https://docs.microsoft.com/en-us/azure/azure-portal/) 文档 - 包含 [Static Web Apps 快速入门](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-portal?tabs=vanilla-javascript)
 * [Azure SWA CLI](https://github.com/Azure/static-web-apps-cli) 文档
 * [Azure Functions Core Tools](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local) 文档
 * 适用于 JavaScript 及其他语言的 [Azure SDK](https://azure.github.io/azure-sdk/releases/latest/js.html)
 * [Visual Studio Code 的 Azure 扩展](https://code.visualstudio.com/docs/azure/extensions)