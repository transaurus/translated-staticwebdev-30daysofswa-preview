---
slug: building-swa
title: "#02: Building SWA"
authors: [glaucia, nitya]
tags: [swa, 30days, core-concepts]
draft: false
---

欢迎来到 **#30DaysOfSWA** 的第1周第2天！

昨天我们快速了解了Azure静态Web应用（它是什么、架构原理以及使其对现代Web开发者有用的10大特性）。今天，我们将深入探讨_构建静态Web应用_。

## 今日要点

* 如何开始使用SWA？
 * 在个人和生产项目中使用SWA
 * 构建并部署你的第一个SWA
 * **教程** 让我们构建一个经典电影信息展示页！
 * **练习** 该你了！同时庆祝`#星球大战日`
 * **资源:** [静态Web应用快速入门](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript)

![](../static/img/series/02-banner.png)

## 1. 入门指南

Azure静态Web应用服务可轻松实现从代码库直接发布现代Web应用程序。让我们先通过一个基础Web应用（HTML、CSS、JS）来了解开发工作流和配置选项。

### 1.1 准备工作

进行本快速入门需要：

* [GitHub账号](https://github.com/) - 如需可[免费注册](https://github.com/signup)
 * [Azure账户](https://portal.azure.com) - 可[免费注册](https://azure.microsoft.com/en-us/free/)开始使用
 * [Visual Studio Code](https://code.visualstudio.com/)及[此VS Code扩展](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps) - 推荐IDE用户使用

本教程假设你偏好使用IDE开发，并希望将构建/部署流程集成其中。我将以Visual Studio Code为例。若你更倾向命令行或浏览器操作，我们也提供相应方案：

* [Azure CLI快速入门](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-cli?tabs=vanilla-javascript) - 命令行工作流
 * [Azure门户快速入门](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-portal?tabs=vanilla-javascript&pivots=github) - 浏览器操作流程

### 1.2 最终成果

目标是将这个基础HTML/CSS/JS应用配置为自动构建/部署到Azure静态Web应用。我们将使用这个[官方快速入门](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript)，它提供了[原生JS应用启动模板](https://github.com/staticwebdev/vanilla-basic/generate)作为基础。你也可以大胆尝试用自己的原生JS代码库操作。

我们将首先克隆该模板——默认使用**GitHub**作为代码托管平台。Azure静态Web应用支持灵活部署选项，如需使用**[BitBucket](https://github.com/staticwebdev/vanilla-basic/generate)、[GitLab](https://docs.microsoft.com/en-us/azure/static-web-apps/gitlab?tabs=vanilla-javascript)或[Azure DevOps](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-portal?tabs=vanilla-javascript)**，请参考对应教程。本周后续将发布《部署SWA》文章详解。

![原生JS快速入门成果页面](../static/img/series/02-vanillajs-start.png)

这个原生JS启动模板有什么功能？很简单——如上图所示，它只是个空白网页上的标题。完成后你将获得：

- **托管版SWA**: 查看[实时部署效果](https://witty-desert-019fd800f.1.azurestaticapps.net/)
 - **代码库**: 访问[源代码仓库](https://github.com/fearlessly-dev/my-first-swa)

准备好开始了吗？让我们出发吧！

### 1.3 构建流程

完整流程记录在[快速入门文档](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript)中，包含以下步骤：

* [**点击**](https://github.com/login?return_to=/staticwebdev/vanilla-basic/generate)从模板生成你的vanilla-js应用
 * [**克隆**](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript#clone-the-repository)仓库到本地，用Visual Studio Code打开
 * [**安装**](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript#install-azure-static-web-apps-extension)VS Code的Azure Static Web Apps扩展（如未安装）
 * 在活动栏[**选择Azure**](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript#create-a-static-web-app)查看扩展窗口，此流程中会提示登录Azure和GitHub
    1. 选择Static Web Apps部分，点击"+"开始SWA配置
    2. 选择要使用的Azure订阅
    3. 选择部署区域（靠近你的位置）
    4. 选择"Custom"预设 - 应用位置填`/src`，构建目录留空
    5. 按Enter键，等待构建状态弹窗通知

部署完成后（会显示成功通知），再次打开Azure扩展窗口。在Static Web Apps部分找到项目右键点击，有三个关键操作：

1. `浏览站点` - 查看[实时部署的网站](https://witty-desert-019fd800f.1.azurestaticapps.net/)
 2. `编辑工作流` - 查看为SWA自动配置的[GitHub Actions](https://github.com/fearlessly-dev/my-first-swa/blob/main/.github/workflows/azure-static-web-apps-witty-desert-019fd800f.yml)
 3. `在门户中打开` - 在Azure门户管理SWA

**搞定！！仅需几次点击和配置，你就完成了首个静态Web应用的部署！** 🎉

### 1.4 技术解析

幕后发生了什么？

查看[代码库](https://github.com/fearlessly-dev/my-first-swa)会发现**一个关键变化** - Azure SWA服务[自动配置了GitHub Actions工作流](https://github.com/fearlessly-dev/my-first-swa/commit/1441e25149f1573a7010682e0a431263fbd89cb6)，直接使用你的GitHub凭证在仓库中完成。无需手动操作！

该工作流会在代码提交(`push`)和贡献(`pull request`)时自动触发构建/部署。当你修改应用代码时，工作流会自动重建并更新静态Web应用。🙌🏽

### 1.5 视频教程

想观看流程演示？查看这段2分钟的[Azure静态Web应用技巧](https://docs.microsoft.com/en-us/shows/azure-tips-and-tricks-static-web-apps/)视频（2021年录制）。虽然演示的是另一个vanilla-JS应用，但"使用Visual Studio Code快速入门"的步骤完全相同！

<iframe width="560" height="315" frameborder="0" src="https://aka.ms/docs/player?show=azure-tips-and-tricks-static-web-apps&ep=how-to-deploy-your-first-azure-static-web-apps-3-of-16--azure-tips-and-tricks-static-web-apps"></iframe>

## 2. "没有尝试一说！"

你意识到今天是5月3日对吧？这意味着明天就是5月4日——还有什么比用我们自己定制的电影横幅来致敬我们最爱的电影口号（"愿原力与你同在"）更好的方式，来分享我们的起源故事呢？

![使用Azure静态Web应用构建爬虫效果](../static/img/series/02-banner-glaucia.png)

尝试这个由三部分组成的教程，将基础的HTML/CSS/JS应用提升到新高度——重现经典《星球大战》系列标志性的开场滚动字幕。放手去做吧！

1. [第一部分：创建基础页面并用HTML/CSS设计样式](https://dev.to/azure/building-star-wars-crawler-with-azure-static-web-apps-part-1-3o39)  
2. [第二部分：用JavaScript让动态横幅活起来](https://dev.to/azure/building-star-wars-crawler-with-azure-static-web-apps-part-2-3hc0)  
3. [第三部分：使用Visual Studio Code部署到静态Web应用](https://dev.to/azure/building-star-wars-crawler-with-azure-static-web-apps-part-3-41ip)

**请注意：** 本教程仅用于演示如何用CSS/JS/HTML创建横幅效果，并在标志性日期致敬经典电影！电影标志、音乐等元素版权归相关所有者所有，未经许可不得使用。

## 3. 聊聊服务方案！

Azure静态Web应用服务提供[两种方案](https://docs.microsoft.com/en-us/azure/static-web-apps/plans)——适用于个人项目的**免费**方案，以及更适合生产环境应用的**标准**（付费）方案。查看[功能对比](https://docs.microsoft.com/en-us/azure/static-web-apps/plans#features)来选择最适合您的方案。

根据我的个人经验，作为独立开发者，免费层级的资源已足够用于探索创意、托管原型（面向真实用户）或演示（验证想法）。免费层级还默认支持托管函数（集成无服务器API功能）。若需"自带函数"功能，则需标准方案。大多数情况下，您可以使用免费层级完成#30DaysOfSWA中的所有练习。

## 4. 实践练习

如果您跟进了快速入门指南，现在应该已使用vanilla-JS模板部署了首个Azure静态Web应用。现在，尝试以下一个（或两个）挑战：

* **完成其他快速入门教程**——通过[Azure CLI](https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-cli?tabs=vanilla-javascript)和[Azure门户](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript)操作，了解工作流差异。并参加[#SWA周年庆](2022-04-30.md)活动学习[SWA CLI](https://docs.microsoft.com/en-us/azure/static-web-apps/local-development)本地开发工具。  
* **制作专属电影字幕**——跟随Glaucia的教程在Azure静态Web应用上运行默认横幅，然后修改文字讲述_你的起源故事_，并在5月4日（[星球大战日](https://www.starwars.com/star-wars-day)）分享——"愿第四日与你同在！"