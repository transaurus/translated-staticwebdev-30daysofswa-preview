---
slug: practices-full-stack-react
title: "#28: Full-Stack SWA: React + Mongoose"
authors: [christopher]
tags: [swa, 30days, best-practices, react, mongoose]
draft: false
---

<head>
  <meta name="twitter:url" content="https://www.azurestaticwebapps.dev/blog/practices-full-stack-react" />
  <meta name="twitter:title" content="#28: Full-Stack SWA with React + Mongoose" />
  <meta name="twitter:description" content="Join @GeekTrainer on #30DaysOfSWA as he builds a full-stack @Reactjs app with @AzureStatic Apps @AzureFunctions @AzureCosmosDB & @mongoosejs !" />
  <meta name="twitter:image" content="https://www.azurestaticwebapps.dev/assets/images/28-banner.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@nitya" />
  <meta name="twitter:site" content="@AzureStaticApps" /> 
  <link rel="canonical" href="https://www.azurestaticwebapps.dev/blog/practices-full-stack-react" />
</head>

欢迎来到 **#30DaysOfSWA** 的 `第4周第7天`！！

我们已来到本系列的最后一篇，让我们回到第1天的起点。我们最初讨论了基于Azure静态Web应用构建的端到端开发者体验——随后通过一系列文章探索了体现这一愿景的各种Azure服务集成。如果能有一个端到端的开发示例作为您下一个原型的**启动模板**，岂不美哉？让我们以完美案例结束本周。今天我们将了解一个全栈应用的端到端开发工作流：

- 使用[React](https://reactjs.org/)和[Redux Toolkit](https://redux-toolkit.js.org/)构建的前端
- 使用[Azure Functions](https://docs.microsoft.com/azure/static-web-apps/add-api?tabs=vanilla-javascript)构建的后端
- 通过[Azure静态Web应用](https://docs.microsoft.com/en-us/azure/static-web-apps/)部署至云端
- 采用[Cosmos DB托管的MongoDB数据库](https://docs.microsoft.com/azure/cosmos-db/mongodb/mongodb-introduction)，通过[Mongoose](https://mongoosejs.com/)访问
- （可选包含Playwright测试）

## 内容概览

- 构建全栈应用
- 为何选择Mongoose？
- 为何选择Redux Toolkit？
- **构建**：实现并部署React/Mongoose模板
- **练习**：添加自定义功能

![](../static/img/series/28-banner.png)

## 使用SWA构建全栈应用

在本系列第一周，我们探讨了[构建静态Web应用](./2022-05-03.md)，使用**现有启动模板**并学习了Azure静态Web应用的操作选项：

1. [使用VS Code](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=react)——若您偏好IDE
 2. [使用Azure CLI](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started-cli?tabs=react)——若您偏好命令行
 3. [使用Azure门户](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started-portal?tabs=react&pivots=github)——若您偏好基于浏览器的工作流 
 4. [使用Azure静态Web应用CLI](https://azure.github.io/static-web-apps-cli/docs/use/install)——若您偏好统一的开发部署工具

默认启动模板（适用于vanillaJS、React、Angular、Blazor、Vue）使用简单的**前端应用**来验证本地开发环境，并帮助您熟悉Azure静态Web应用设置的自动化构建/部署工作流。

今天我们将了解不同的内容——一个[mongoose-starter](https://github.com/staticwebdev/mongoose-starter)模板，用于构建具有React/Redux前端、无服务器后端（使用Azure Functions）和NoSQL数据库（使用Azure CosmosDB API for MongoDB）的**全栈应用**，该数据库与流行的mongoose客户端无缝协作。

通过此视频深入了解如何使用该技术栈创建全栈应用：

<iframe src="https://learn-video.azurefd.net/vod/player?show=azure-tips-and-tricks-static-web-apps&ep=create-javascript-serverless-apps-w-azure-static-web-apps-etc-14-of-16--azure-tips-and-tricks" width="600" height="400"  frameborder="0"  allowfullscreen></iframe>

## 为何选择Mongoose？

访问数据存储时，您可以直接使用API与后端交互，或使用能提供额外功能的库。许多开发者倾向于使用库，因为这能让他们更专注于代码和逻辑的创建，同时分担部分工作负担。Mongoose正是这样一个库。

[Mongoose](https://mongoosejs.com/) 是一个对象文档映射器(ODM)，允许您定义需要存储在NoSQL数据库中的对象。Mongoose可与任何支持MongoDB API的数据库配合使用，[Azure Cosmos DB正具备此能力](https://docs.microsoft.com/azure/cosmos-db/mongodb/mongodb-introduction)。通过Mongoose，您可以创建数据模式、实施验证，并简化数据交互流程。

## 为何选择Redux Toolkit？

[Redux](https://redux.js.org/) 是管理[React](https://reactjs.org/)应用状态最流行的工具。[Redux Toolkit](https://redux-toolkit.js.org/) 通过为Redux最常见任务提供额外框架来简化项目创建。它包含可简化reducer创建、状态更新与访问的函数集。

## 快速入门：使用React/Mongoose模板

为加速开发流程，我们将采用基于以下库和工具的[mongoose-starter模板](https://github.com/staticwebdev/mongoose-starter)：

- React
- Redux Toolkit
- Mongoose
- [Node-config](https://github.com/node-config/node-config#readme)
- SWA CLI

该模板是一个待办事项应用，包含事项和清单（包含事项）的数据模型。它使用[通过Azure静态Web应用实现的GitHub身份验证](https://docs.microsoft.com/azure/static-web-apps/authentication-authorization?tabs=invitations)。为支持本地开发，模板包含`devcontainer.json`文件以[使用开发容器](https://code.visualstudio.com/docs/remote/containers)。

按照**[本教程](https://docs.microsoft.com/azure/static-web-apps/add-mongoose)**完成以下步骤，构建并部署全栈应用到Azure静态Web应用：

- 创建Cosmos DB服务
- 从模板新建代码仓库
- 创建Azure静态Web应用
- 配置Azure静态Web应用
- 使用站点

**观看此片段**可交互式学习使用mongoose-starter模板将基础项目构建部署到Azure静态Web应用的全过程。

<iframe src="https://learn-video.azurefd.net/vod/player?show=azure-tips-and-tricks-static-web-apps&ep=how-to-create-your-azure-static-web-apps-from-a-github-template-15-of-16--azure-tips-and-tricks" width="600" height="400"  frameborder="0"  allowfullscreen></iframe>

**观看此片段**了解如何设置和配置Azure CosmosDB资源以配合Azure静态Web应用部署。

<iframe src="https://learn-video.azurefd.net/vod/player?show=azure-tips-and-tricks-static-web-apps&ep=setup-cosmos-db-w-a-mongodb-api-to-use-w-azure-static-web-apps-16-of-16--azure-tips--tricks" width="600" height="400"  frameborder="0"  allowfullscreen></iframe>

## 实践：添加自定义功能

该模板设计为项目开发的起点。

您可通过**扩展功能**深化学习：克隆创建的仓库并开始编写代码！例如：

* 为事项添加标签功能
 * 实现归档功能
 * 集成[人工智能检测任务情感倾向](https://docs.microsoft.com/azure/cognitive-services/language-service/sentiment-opinion-mining/quickstart?pivots=programming-language-javascript)

或运用所学知识，为其他前端框架构建的应用添加CosmosDB数据库——尝试第二周的用例示例，或增强既有项目。

## 资源推荐

以下资源可助您深入探索Azure静态Web应用托管应用的开发：

- SWA快速入门：[使用Azure CLI](https://docs.microsoft.com/azure/static-web-apps/get-started-cli?tabs=react)
- [官方教程：React入门](https://reactjs.org/tutorial/tutorial.html)
- [使用React创建首个Web应用](https://docs.microsoft.com/learn/paths/react/) - Microsoft Learn课程
- [Web开发初学者指南](https://github.com/microsoft/Web-Dev-For-Beginners) - 基于项目的课程体系